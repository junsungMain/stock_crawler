# 주식 데이터 크롤러 (Stock Data Crawler)

네이버 주식과 네이버 컴퍼니에서 주식 관련 데이터를 수집하는 Python 크롤러입니다.

## 🚀 주요 기능

- **테마별 주식 목록 수집**: 네이버 주식의 테마별 종목 정보를 수집
- **재무 데이터 수집**: 매출액, 당기순이익, 부채비율, ROE, PBR, PER 등 재무 지표
- **추가 재무 데이터**: 영업이익증가율 등 상세 재무 정보
- **주가 성과 데이터**: 1개월, 3개월, 6개월, 1년 수익률
- **최신 뉴스 및 공시**: 각 종목의 최신 뉴스와 공시 정보
- **병렬 처리**: 멀티스레딩을 통한 빠른 데이터 수집
- **자동 재시도**: 네트워크 오류 시 자동 재시도 기능
- **로그 관리**: 자동 로그 생성 및 오래된 로그 정리

## 📋 수집 데이터 항목

### 기본 정보
- 종목코드, 종목명, 테마
- 현재가, 전일대비, 등락률
- 거래량, 시가총액

### 재무 데이터
- 매출액 (최근 4분기)
- 당기순이익 (최근 4분기)
- 부채비율 (최근 4분기)
- ROE, PBR, PER (최신)
- 영업이익증가율 (최근 4분기)

### 성과 데이터
- 수익률 (1개월, 3개월, 6개월, 1년)

### 최신 정보
- 최신 뉴스 제목 및 날짜
- 최신 공시 제목 및 날짜

## 🛠️ 설치 및 실행

### 1. 의존성 설치
```bash
pip install -r requirements.txt
```

### 2. 실행
```bash
python crawler.py
```

### 3. 실행 파일 생성 (선택사항)
```bash
pyinstaller --onefile crawler.py
```

## 📁 프로젝트 구조

```
crawler/
├── crawler.py              # 메인 실행 파일
├── requirements.txt        # Python 패키지 의존성
├── module/
│   ├── common.py          # 공통 유틸리티 함수
│   ├── stock_list.py      # 테마별 주식 목록 수집
│   ├── financial_data.py  # 재무 데이터 수집
│   ├── main_data.py       # 주가 성과 데이터 수집
│   └── new_and_disclosure.py # 뉴스 및 공시 수집
├── template/
│   └── stock_list.xlsx    # 결과 저장용 템플릿 파일
└── logs/                  # 로그 파일 저장 디렉토리
```

## 📊 출력 결과

실행 후 현재 날짜로 된 Excel 파일이 생성됩니다:
- `YYYYMMDD_주식현황.xlsx`

이 파일에는 모든 수집된 데이터가 정리되어 저장됩니다.

## ⚙️ 설정 옵션

### 동시 처리 수 조정
`crawler.py`의 `ThreadPoolExecutor`에서 `max_workers` 값을 조정하여 동시 처리 수를 변경할 수 있습니다.

### 재시도 설정
`module/common.py`의 `retry_on_failure` 함수에서 최대 재시도 횟수와 대기 시간을 조정할 수 있습니다.

### 로그 보관 기간
`setup_logging_and_cleanup` 함수에서 `days_to_keep` 매개변수로 로그 보관 기간을 설정할 수 있습니다.

## 🔧 주요 기술 스택

- **Python 3.x**
- **requests**: HTTP 요청 처리
- **pandas**: 데이터 처리 및 Excel 저장
- **openpyxl**: Excel 파일 조작
- **BeautifulSoup4**: HTML 파싱
- **tqdm**: 진행률 표시
- **concurrent.futures**: 병렬 처리

## ⚠️ 주의사항

1. **네트워크 환경**: 안정적인 인터넷 연결이 필요합니다.
2. **API 제한**: 과도한 요청으로 인한 차단을 방지하기 위해 적절한 딜레이가 설정되어 있습니다.
3. **데이터 정확성**: 수집된 데이터는 참고용이며, 투자 결정 시 공식 자료를 확인하시기 바랍니다.
4. **법적 고지**: 이 도구는 교육 및 개인적인 용도로만 사용하시기 바랍니다.

## 📝 로그

- 로그 파일은 `logs/` 디렉토리에 날짜별로 저장됩니다.
- 기본적으로 7일간 보관되며, 오래된 로그는 자동으로 삭제됩니다.

## 🤝 기여

버그 리포트나 기능 제안은 이슈를 통해 제출해 주세요.

## 📄 라이선스

이 프로젝트는 개인적인 용도로만 사용하시기 바랍니다.
